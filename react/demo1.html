<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        table .table-list{
            border: 1px solid;
            width: 200px;
        }
        table.table-list th,table.table-list td{
			border:solid 1px gray;
			text-align: center;
		}
        td.finished{
			text-decoration: line-through;
		}
    
    </style>
</head>
<body>
    <div id="app"></div>
    


    <script src="babel/browser.js"></script>
    <script src="react/react.js"></script>
    <script src="react/react-dom.js"></script>
    <script type="text/babel">

            var data = [
                    {title:"学习ES6新语法", finished:false},
                    {title:"学习Spring Boot", finished:false},
                    {title:"背诵单词", finished:true}
            ];

        var TableHead=React.createClass({
            getInitialState:function(){
                return{
                    bookdata :this.props.bookdata
                }
            },
            render:function(){     
                return (
                    <div>  
                        <h2>TODO APP</h2>
                        代办事务：  <input type="text"/> <button>添加</button>  
                    </div>
                );
            }
        });

        var TableList = React.createClass({  
        
            titlestatusChange:function(item){
    
                item.finished = !item.finished;
                this.props.onTodoStatusChange(item);
              
            },
        

            render:function(){
                var cpm = this;
                return(
                   
                    <table className="table-list">
                        <tbody> 
                            <tr>
                                <td>完成</td>
                                <td>代办事项</td>
                                <td>删除</td>
                            </tr>
                            
                            {this.props.bookdata.map(function(item,index){

                                return(
                                    <tr key={index}>
                                        <td><input type="checkbox" checked={item.finished} 
                                            onChange={()=>cpm.titlestatusChange(item)}/></td>
                                        <td className={item.finished?'finished':''}>{item.title}</td>
                                        <td><button>删除</button></td>
                                    </tr>  
                                );
                            })}
                            </tbody>
                        </table>
                 

                )
            }
        });
        
        var App =React.createClass({

            changeTodoStatus:function(updateItem){
			var arr = this.state.todos.slice();
			var item = arr.find(function(value,index,arr){
				return updateItem.title === value.title;
			});
			item.finished = updateItem.finished;
			this.setState({
				todos:arr
			});
		},
            render:function(){
                return(
                    <div>
                        <TableHead></TableHead>
                        <TableList bookdata={data} onTodoStatusChange={this.changeTodoStatus}></TableList>
                    </div>
                );

            }

        });

        ReactDOM.render(<App></App>,document.getElementById("app"));

    </script>
</body>
</html>